class i{elements;storageKey="theme";constructor(){this.elements=this.getElements()}getElements(){return{themeToggle:document.getElementById("theme-toggle"),sunIcon:document.getElementById("theme-toggle-sun"),moonIcon:document.getElementById("theme-toggle-moon"),html:document.querySelector("html")}}updateIconsVisibility(e){let{sunIcon:t,moonIcon:s}=this.elements;if(e)t?.classList.add("invisible"),s?.classList.remove("invisible");else t?.classList.remove("invisible"),s?.classList.add("invisible")}setCookie(e,t,s=365){let n=new Date;n.setTime(n.getTime()+s*24*60*60*1000),document.cookie=`${e}=${t};expires=${n.toUTCString()};path=/;SameSite=Lax`}async toggleTheme(){let{html:e}=this.elements;if(!e)return;let t=e.classList.toggle("dark"),s=t?"dark":"light";this.updateIconsVisibility(t),this.setCookie("theme",s)}init(){let{html:e}=this.elements;if(!e)return;let t=e.classList.contains("dark");this.updateIconsVisibility(t),this.elements.themeToggle?.addEventListener("click",async()=>{await this.toggleTheme()})}}class m{lastScrollY=window.scrollY;threshold=50;header=null;constructor(){this.header=document.querySelector("header")}isBlogArticlePage(){let e=window.location.pathname;return e.split("/").filter((s)=>s.length>0).length===2&&!e.endsWith("/")}updateHeaderVisibility(){if(!this.header)return;if(!this.isBlogArticlePage()){this.showHeader();return}let e=window.scrollY,t=e>this.lastScrollY,s=e>this.threshold;if(t&&s)this.hideHeader();else this.showHeader();this.lastScrollY=e}hideHeader(){this.header?.classList.add("header-hidden"),this.header?.classList.remove("header-visible")}showHeader(){this.header?.classList.add("header-visible"),this.header?.classList.remove("header-hidden")}init(){window.addEventListener("scroll",()=>{this.updateHeaderVisibility()}),window.addEventListener("popstate",()=>{this.lastScrollY=window.scrollY,this.updateHeaderVisibility()})}}class o{form=document.querySelector("#subscribe-form");loader=document.querySelector("#subscribe-loader");button=document.querySelector("#subscribe-plane");constructor(){this.init()}init(){this.form?.addEventListener("submit",(e)=>{e.preventDefault(),this.handleSubmit()})}async handleSubmit(){let e=new FormData(this.form);this.loader?.classList.add("visible"),this.loader?.classList.remove("invisible"),this.button?.classList.add("invisible");try{let t=await fetch("/subscribe",{method:"POST",body:e});if(!t.ok){let s=await t.json();console.error("Subscription error:",s)}}catch(t){console.error("Network error:",t)}window.location.href="/thank-you"}}class r{categoriesContainer=null;storageKey="categories-scroll-position";constructor(){this.categoriesContainer=document.querySelector("#categories ul")}saveScrollPosition(){if(!this.categoriesContainer)return;let e=this.categoriesContainer.scrollLeft;localStorage.setItem(this.storageKey,e.toString())}restoreScrollPosition(){if(!this.categoriesContainer)return;let e=localStorage.getItem(this.storageKey);if(e)requestAnimationFrame(()=>{this.categoriesContainer.scrollLeft=parseInt(e,10)})}setupScrollListener(){if(!this.categoriesContainer)return;let e=null;this.categoriesContainer.addEventListener("scroll",()=>{if(e)clearTimeout(e);e=window.setTimeout(()=>{this.saveScrollPosition()},100)})}setupLinkListeners(){if(!this.categoriesContainer)return;this.categoriesContainer.querySelectorAll("a").forEach((t)=>{t.addEventListener("click",()=>{this.saveScrollPosition()})})}init(){if(!this.categoriesContainer)return;this.restoreScrollPosition(),this.setupScrollListener(),this.setupLinkListeners()}}function c(){let e=document.querySelectorAll(".image");if(!e.length)return;e.forEach((t)=>{let s=t.querySelector("img");if(!s)return;function n(){s.classList.remove("opacity-0"),s.classList.add("opacity-100"),t.style.backgroundImage="none",t.style.setProperty("background-image","none","important"),t.classList.add("image-loaded"),t.setAttribute("data-loaded","true")}if(s.complete)n();else s.addEventListener("load",n)})}window.addEventListener("DOMContentLoaded",()=>{let e=new i,t=new m,s=new o,n=new r;e.init(),t.init(),s.init(),n.init(),c()});
