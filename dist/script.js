class i{elements;storageKey="theme";constructor(){this.elements=this.getElements()}getElements(){return{themeToggle:document.getElementById("theme-toggle"),sunIcon:document.getElementById("theme-toggle-sun"),moonIcon:document.getElementById("theme-toggle-moon"),html:document.querySelector("html")}}updateIconsVisibility(t){let{sunIcon:m,moonIcon:n}=this.elements;if(t)m?.classList.add("invisible"),n?.classList.remove("invisible");else m?.classList.remove("invisible"),n?.classList.add("invisible")}setCookie(t,m,n=365){let h=new Date;h.setTime(h.getTime()+n*24*60*60*1000),document.cookie=`${t}=${m};expires=${h.toUTCString()};path=/;SameSite=Lax`}async toggleTheme(){let{html:t}=this.elements;if(!t)return;let m=t.classList.toggle("dark"),n=m?"dark":"light";this.updateIconsVisibility(m),this.setCookie("theme",n)}init(){let{html:t}=this.elements;if(!t)return;let m=t.classList.contains("dark");this.updateIconsVisibility(m),this.elements.themeToggle?.addEventListener("click",async()=>{await this.toggleTheme()})}}class E{lastScrollY=window.scrollY;threshold=50;header=null;constructor(){this.header=document.querySelector("header")}isBlogArticlePage(){let t=window.location.pathname;return t.split("/").filter((n)=>n.length>0).length===2&&!t.endsWith("/")}updateHeaderVisibility(){if(!this.header)return;if(!this.isBlogArticlePage()){this.showHeader();return}let t=window.scrollY,m=t>this.lastScrollY,n=t>this.threshold;if(m&&n)this.hideHeader();else this.showHeader();this.lastScrollY=t}hideHeader(){this.header?.classList.add("header-hidden"),this.header?.classList.remove("header-visible")}showHeader(){this.header?.classList.add("header-visible"),this.header?.classList.remove("header-hidden")}init(){window.addEventListener("scroll",()=>{this.updateHeaderVisibility()}),window.addEventListener("popstate",()=>{this.lastScrollY=window.scrollY,this.updateHeaderVisibility()})}}class I{form=document.querySelector("#subscribe-form");loader=document.querySelector("#subscribe-loader");button=document.querySelector("#subscribe-plane");constructor(){this.init()}init(){this.form?.addEventListener("submit",(t)=>{t.preventDefault(),this.handleSubmit()})}async handleSubmit(){let t=new FormData(this.form);this.loader?.classList.add("visible"),this.loader?.classList.remove("invisible"),this.button?.classList.add("invisible");try{let m=await fetch("/subscribe",{method:"POST",body:t});if(!m.ok){let n=await m.json();console.error("Subscription error:",n)}}catch(m){console.error("Network error:",m)}window.location.href="/thank-you"}}class u{categoriesContainer=null;storageKey="categories-scroll-position";constructor(){this.categoriesContainer=document.querySelector("#categories ul")}saveScrollPosition(){if(!this.categoriesContainer)return;let t=this.categoriesContainer.scrollLeft;localStorage.setItem(this.storageKey,t.toString())}restoreScrollPosition(){if(!this.categoriesContainer)return;let t=localStorage.getItem(this.storageKey);if(t)requestAnimationFrame(()=>{this.categoriesContainer.scrollLeft=parseInt(t,10)})}setupScrollListener(){if(!this.categoriesContainer)return;let t=null;this.categoriesContainer.addEventListener("scroll",()=>{if(t)clearTimeout(t);t=window.setTimeout(()=>{this.saveScrollPosition()},100)})}setupLinkListeners(){if(!this.categoriesContainer)return;this.categoriesContainer.querySelectorAll("a").forEach((m)=>{m.addEventListener("click",()=>{this.saveScrollPosition()})})}init(){if(!this.categoriesContainer)return;this.restoreScrollPosition(),this.setupScrollListener(),this.setupLinkListeners()}}function L(){let t=document.querySelectorAll(".image");if(!t.length)return;t.forEach((m)=>{let n=m.querySelector("img");if(!n)return;function h(){n.classList.remove("opacity-0"),n.classList.add("opacity-100"),m.style.backgroundImage="none",m.style.setProperty("background-image","none","important"),m.classList.add("image-loaded"),m.setAttribute("data-loaded","true")}if(n.complete)h();else n.addEventListener("load",h)})}var T=async()=>{await Promise.all(Array.from(document.styleSheets).map((e)=>{if(e.href)return new Promise((s)=>{try{e.cssRules,s()}catch{let y=document.querySelector(`link[href="${e.href}"]`);if(y)y.addEventListener("load",()=>s(),{once:!0});else s()}});return Promise.resolve()}));let t=new i,m=new E,n=new I,h=new u;t.init(),m.init(),n.init(),h.init(),L()};if(document.readyState==="loading")window.addEventListener("DOMContentLoaded",T);else T();
